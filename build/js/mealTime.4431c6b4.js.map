{"version":3,"sources":["webpack:///./src/views/menuContent/timeSelect/mealTime/mealTime.vue?41d1","webpack:///./src/views/menuContent/timeSelect/mealTime/mealTime.vue?839c","webpack:///./src/views/menuContent/timeSelect/mealTime/mealTime.vue?c4e4","webpack:///./src/views/menuContent/timeSelect/mealTime/mealTime.vue?4441","webpack:///./src/views/menuContent/timeSelect/mealTime/mealTime.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","class","dayMode","on","$event","choiceDay","_v","_s","day","meal","choiceMeal","submit","staticRenderFns","VueOptions","extend","components","props","Date","initTime","dateArr","window","getSysDate","showPicker","dayTime","nowTime","getTime","date","getMeal","map","e","label","value","h","getHours","toPromise","res","weui","picker","onConfirm","result","onClose","getDay","day2","String","title","confirmRef","show","msg","isShowCancel","saveMealInfo","mealType","$router","push","initData","watch","component"],"mappings":"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","file":"js/mealTime.4431c6b4.js","sourcesContent":["import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mealTime.vue?vue&type=style&index=1&id=563e514b&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mealTime.vue?vue&type=style&index=1&id=563e514b&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mealTime\"},[_c('div',{staticClass:\"order_time\"},[_vm._m(0),_c('div',{staticClass:\"choice_time\"},[_c('ul',[_c('li',{class:_vm.dayMode === '0' ? 'choice_active' : '',on:{\"click\":function($event){return _vm.choiceDay('0')}}},[_vm._v(\"今天\")]),_c('li',{class:_vm.dayMode === '1' ? 'choice_active' : '',on:{\"click\":function($event){return _vm.choiceDay('1')}}},[_vm._v(\"明天\")]),_c('li',{class:_vm.dayMode === '2' ? 'choice_active' : '',on:{\"click\":function($event){return _vm.choiceDay('2')}}},[_vm._v(\"后天\")]),_c('li',{class:_vm.dayMode === '3' ? 'choice_active' : '',on:{\"click\":function($event){return _vm.choiceDay('3')}}},[_vm._v(\"更多时间\")])]),_c('div',{staticClass:\"times\"},[_vm._v(_vm._s(_vm.day))])])]),_c('div',{staticClass:\"order_food\"},[_vm._m(1),_c('div',{staticClass:\"choice_food\"},[_c('ul',[_c('li',{class:_vm.meal === '0' ? 'choice_actives' : '',on:{\"click\":function($event){return _vm.choiceMeal('0')}}},[_c('span',[_vm._v(\"早餐\")])]),_c('li',{class:_vm.meal === '1' ? 'choice_actives' : '',on:{\"click\":function($event){return _vm.choiceMeal('1')}}},[_c('span',[_vm._v(\"午餐\")])]),_c('li',{class:_vm.meal === '2' ? 'choice_actives' : '',on:{\"click\":function($event){return _vm.choiceMeal('2')}}},[_c('span',[_vm._v(\"晚餐\")])])])])]),_c('div',{staticClass:\"time_sumb\"},[_c('a',{staticClass:\"weui-btn weui-btn_primary\",on:{\"click\":function($event){return _vm.submit()}}},[_vm._v(\"下一步 选择菜式\")])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"time_tit\"},[_c('i',{staticClass:\"icons icon_time\"}),_c('h5',[_vm._v(\"时间\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"time_tit\"},[_c('i',{staticClass:\"icons icon_food\"}),_c('h5',[_vm._v(\"餐次\")])])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\timport Vue from 'vue'\n\timport Component from 'vue-class-component'\n\timport { Mutation, Getter } from 'vuex-class'\n\timport { dateFormat, getDateStr, __dev } from '@/common/util';\nimport { apiService } from '../../../../common/api.service';\n\n\tconst VueOptions = Vue.extend({\n\t\tcomponents: {\n\t\t\t\n\t\t},\n\t})\n\n\t@Component({\n\t\twatch: {\n\n\t\t}\n\t})\n\n\texport default class MealTime extends VueOptions{\n\t\t@Getter('confirmRef') confirmRef!: any;\n\t\t@Mutation('SAVE_MEAL_INFO') saveMealInfo: Function;\n\n\t\tdayMode: '0' | '1' | '2' | '3' = '0'; // 默认当天\n\t\tday: string = dateFormat(new Date()); // 格式化后当前时间\n\t\tinitTime: Date = new Date(); // 初始系统时间\n\t\tdateArr: {\n\t\t\tlabel: string;\n\t\t\tvalue: string;\n\t\t}[] = [];\n\t\tmeal: '0' | '1' | '2' | '' = '';\n\t\tpickerDay: string; // 记录datePicker的时间\n\n\t\tconstructor(props: any) {\n\t\t\tsuper(props);\n\t\t\t__dev(() => {\n\t\t\t\twindow['thisMealTime'] = this;\n\t\t\t})\n\t\t}\n\n\t\tasync choiceDay(dayMode: '0' | '1' | '2' | '3') {\n\t\t\tthis.dayMode = dayMode;\n\t\t\tswitch(dayMode) {\n\t\t\t\tcase '0':\n\t\t\t\t\tthis.day = await this.getSysDate();\n\t\t\t\t\tbreak;\n\t\t\t\tcase '3':\n\t\t\t\t\tthis.showPicker();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault: \n\t\t\t\t\tconst dayTime = 1000 * 24 * 60 * 60;\n\t\t\t\t\tconst nowTime = this.initTime.getTime();\n\t\t\t\t\tconst date = new Date(nowTime + (+dayMode * dayTime));\n\t\t\t\t\tthis.day = dateFormat(date);\n\t\t\t}\n\t\t\tthis.meal = this.getMeal();\n\t\t}\n\n\t\tchoiceMeal(meal: '0' | '1' | '2' | '') {\n\t\t\tthis.meal = meal;\n\t\t}\n\n\t\tasync initData() {\n\t\t\tthis.dateArr = [3, 4, 5, 6].map(e => {\n\t\t\t\tconst dayTime = 1000 * 24 * 60 * 60;\n\t\t\t\tconst nowTime = new Date(this.day).getTime();\n\t\t\t\tconst date = new Date(nowTime + e * dayTime);\n\t\t\t\treturn {\n\t\t\t\t\tlabel: getDateStr(date),\n\t\t\t\t\tvalue: dateFormat(date)\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.day = await this.getSysDate();\n\t\t\tthis.meal = this.getMeal();\n\t\t}\n\n\t\tgetMeal(): '0' | '1' | '2' | '' {\n\t\t\tswitch(this.dayMode) {\n\t\t\t\tcase '0': \n\t\t\t\t\tconst date = this.initTime;\n\t\t\t\t\tconst h = date.getHours();\n\t\t\t\t\tif (h < 7) {\n\t\t\t\t\t\treturn '0';\n\t\t\t\t\t} else if (h < 11) {\n\t\t\t\t\t\treturn '1';\n\t\t\t\t\t} else if (h < 17) {\n\t\t\t\t\t\treturn '2';\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\treturn '0';\n\t\t\t}\n\t\t}\n\n\t\tasync getSysDate(): Promise<string> {\n\t\t\tconst res = await apiService('sysDate').toPromise();\n\t\t\tthis.initTime = new Date(res.date);\n\t\t\treturn dateFormat(new Date(res.date));\n\t\t}\n\t\t\n\t\tshowPicker() {\n\t\t\twindow.weui.picker(this.dateArr, {\n\t\t\t\t\tonConfirm: (result) => {\n\t\t\t\t\t\tthis.day = result[0].value;\n\t\t\t\t\t},\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tconst day = this.initTime.getDay();\n\t\t\t\t\t\tconst day2 = new Date(this.day).getDay();\n\t\t\t\t\t\tif (day2 - day <= 2) {\n\t\t\t\t\t\t\tthis.choiceDay(String(day2 - day) as any);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\ttitle: '更多日期'\n\t\t\t});\n\t\t}\n\n\t\tsubmit() {\n\t\t\tif (!this.day) {\n\t\t\t\tthis.confirmRef.show({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tmsg: '请选择就餐日期',\n\t\t\t\t\tisShowCancel: false\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (!this.meal) {\n\t\t\t\tthis.confirmRef.show({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tmsg: '请选择对应的餐次',\n\t\t\t\t\tisShowCancel: false\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (this.dayMode === '0') {\n\t\t\t\tconst date = this.initTime;\n\t\t\t\tconst h = date.getHours();\n\t\t\t\tswitch(this.meal) {\n\t\t\t\t\tcase '0':\n\t\t\t\t\t\tif (!(h < 7)) {\n\t\t\t\t\t\t\tthis.confirmRef.show({\n\t\t\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\t\t\tmsg: '早餐的订餐时段在7点以前',\n\t\t\t\t\t\t\t\tisShowCancel: false\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase '1':\n\t\t\t\t\t\tif (!(h < 11)) {\n\t\t\t\t\t\t\tthis.confirmRef.show({\n\t\t\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\t\t\tmsg: '午餐的订餐时段在11点以前',\n\t\t\t\t\t\t\t\tisShowCancel: false\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\tcase '2':\n\t\t\t\t\t\tif (!(h < 17)) {\n\t\t\t\t\t\t\tthis.confirmRef.show({\n\t\t\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\t\t\tmsg: '晚餐的订餐时段在17点以前',\n\t\t\t\t\t\t\t\tisShowCancel: false\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.saveMealInfo({\n\t\t\t\tday: this.day,\n\t\t\t\tmealType: this.meal\n\t\t\t});\n\t\t\tthis.$router.push('/menuContent/timeSelect/mealMenu')\n\t\t}\n\n\t\tmounted() {\n\t\t\tthis.initData();\n\t\t}\n\t}\n\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mealTime.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mealTime.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./mealTime.vue?vue&type=template&id=563e514b&scoped=true&lang=pug&\"\nimport script from \"./mealTime.vue?vue&type=script&lang=ts&\"\nexport * from \"./mealTime.vue?vue&type=script&lang=ts&\"\nimport style1 from \"./mealTime.vue?vue&type=style&index=1&id=563e514b&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"563e514b\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}